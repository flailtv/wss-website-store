<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ title }}While She Sleeps</title>
{#     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">#}
    <link rel=stylesheet href="{{ url_for("static", filename="style.css") }}" type="text/css">
    <link rel="icon" href="{{ url_for("static", filename="images/icon_done.png") }}">
<style>
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            animation-name: animatetop;
            animation-duration: 0.4s;
        }
        .close {
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        @keyframes animatetop {
        from {top: -300px; opacity: 0}
        to {top: 0; opacity: 1}
        }
        #songs{
            list-style: none;
        }
        #songs li a{
            color: #4e555b;
            text-decoration: none;
        }
        #songs .current_song a{
            color: blue;
        }

    </style>
    <script>
    window.onload = function () {

        var modal = document.getElementById("musicmodal");
        var btn = document.getElementById("musicplayer");
        var span = document.getElementsByClassName("close")[0];

        btn.onclick = function () {
            modal.style.display = "block";
        };
        span.onclick = function () {
            modal.style.display = "none";
        };
        window.onclick = function (event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        }
    }

    </script>
    {% block head %}{% endblock %}

</head>

<body>
<div class="container" style="width: 100%">
    {% include"_navbar.html" %}
{#<hr>#}
{# This is the line ^ #}
{% with messages = get_flashed_messages() %}
{% if messages %}
<ul>
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %}
{% endwith %}
    {% block body %}{% endblock %}
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <button id="musicplayer" style="float: left;width: 120px; position: fixed;bottom: 10px;left: 30px">Music Player</button>
    <div id="musicmodal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div style="overflow: auto" class="align-content-center">
                <audio src="" controls id="music_player">
                    Sorry, your browser does not support HTML5!
                </audio>
                <ul id="songs">
                    {% for i in music %}
                    <li class="current-song"><a href="{{ url_for("static", filename=i.file) }}">{{ i.track }} - {{ i.name }} - {{ i.album }}</a></li>
                    {% endfor %}
                </ul>
{#                <table id="songs" style="padding-left: 100px;width: 60%">#}
{#                    {% for i in music %}#}
{#                        <tr>#}
{#                        <th><img style="width: 10%;" src="{{ url_for("static", filename=i.cover) }}"></th>#}
{#                        <th><a href="{{ url_for("static", filename=i.file) }}">{{ i.track }}</a> </th>#}
{#                        <th><a href="{{ url_for("static", filename=i.file) }}">{{ i.name }}</a> </th>#}
{#                            <th>{{ i.album }}</th>#}
{#                        </tr>#}
{#                    {% endfor %}#}
{#                </table>#}
            </div>
        </div>
{#        TODO Get Music Player To Work#}
    </div>
</div>
{#<script src="../../audioPlayer.js"></script>#}
<script>
    var audio = document.getElementById("music_player");
    audio.volume = 0.3;
    function audioPlayer(){
            var currentSong = 0;
            $("#audioPlayer")[0].src = $("#playlist li a")[0];
            $("#audioPlayer")[0].play();
            $("#playlist li a").click(function(e){
               e.preventDefault();
               $("#audioPlayer")[0].src = this;
               $("#audioPlayer")[0].play();
               $("#playlist li").removeClass("current-song");
                currentSong = $(this).parent().index();
                $(this).parent().addClass("current-song");
            });

            $("#audioPlayer")[0].addEventListener("ended", function(){
               currentSong++;
                if(currentSong == $("#playlist li a").length)
                    currentSong = 0;
                $("#playlist li").removeClass("current-song");
                $("#playlist li:eq("+currentSong+")").addClass("current-song");
                $("#audioPlayer")[0].src = $("#playlist li a")[currentSong].href;
                $("#audioPlayer")[0].play();
            });
        }
    audioPlayer();

    {#music_player();#}
    {#function music_player() {#}
    {#    $("#music_player")[0].src = $("#songs li a")[0];#}
    {#    $("#songs li a").click(function (i) {#}
    {#        i.preventDefault();#}
    {#        $("#music_player")[0].src = this;#}
{#<<<<<<< HEAD#}
    {#    })#}
{#=======#}
{#        })#}
{#    }#}
{#>>>>>>> e51bca6e0d44604050f37891a9a8c4cc77f92ceb#}
</script>
</body>
{#TODO script alert(" "); can be used to alert#}
</html>